
AccessFilterQParserPlugin is a org.apache.solr.search.QParserPlugin that allows
to restrict access to Solr documents indexed by TYPO3 on a document level.

It filters the documents returned from a query by performing set operations
between a particular string field in the index and the specified value. These
values are comma separated lists of user group IDs, the index field stores the
groups that are allowed to access a particular document while the groups the
user is a member of / has access to are specified through a filter parameter.

This is the syntax for searching in Solr:

http://localhost:8983/path/to/solr/select/?q={!typo3access field=fieldname groups=permittedUserGroups}remainder of query

Example :

http://localhost:8983/solr/bitwise/select/?q={!bitwise field=access groups=0,1,4,10}title:Hello

The field parameter is optional

The field parameter is the name of the integer field
The group parameter is the comma separated list of groups the user has access to

To test out this plugin, simply copy the jar file containing the plugin classes into your $SOLR_HOME/lib directory and then
add the following to your solrconfig.xml file :

<queryParser name="typo3access" class="org.typo3.solr.search.AccessFilterQParserPlugin" />

Restart your servlet container.


Migrate from Solr 3.6 to Solr 4.0

1. For running the JUnit-Tests insert this following field in your schema (general_schema_fields.xml):
<field name="_version_" type="long" indexed="true" stored="true"/>

2. To test out this plugin, copy the solr-typo3-access.jar and the solr-typo3-utils.jar into your $SOLR_HOME/lib directory.
The solr-typo3-utils.jar depends on the commons-lang3.jar. Please download this jar from http://commons.apache.org/lang/ and
copy it into your $SOLR_HOME/lib directory.
